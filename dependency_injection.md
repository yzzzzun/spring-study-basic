## 의존관계 주입

### 생성자 주입

- 생성자를 호출하는 시점에 딱한번 호출 보장
- **불변, 필수 의존관계**에 사용
- 생성자가 하나라면 @Autowired를 생략해도 스프링 빈에대해 의존성 주입이 자동으로 됨

### 수정자 주입

- setter 수정자 메서드를 통해 의존성 주입
- **선택, 변경** 가능성있는 의존관계에 사용

### 필드 주입

- 필드에 바로 자동주입
- 코드가 간결하지만 외부에서 변경이 불가능해 테스트가 불편
- 사용하지 말아야함
  - 테스트 코드에서는 사용
  - Configuration 파일은 Spring 설정 에서만 사용하기때문에 사용하는 경우도 있음

### 일반 메서드 주입

- 일반 메서드를 통해 주입가능
- 한번에 여러 필드 주입 가능
- 일반적으로 사용하지 않음

### 생성자 주입을 선택해야한다.

**불변**

대부분 애플리케이션은 종료시까지 의존관계를 변경할 일이 없다. 불변이 중요하다.

수정자 주입을 사용하면 setter를 public으로 열어둬야함

누군가 실수던, 의도던 변경을 열어두게 되고 좋은 설계가 아님

생성자 주입은 객체생성시 단 한번만 호출되므로 불변하게 설계가능

**누락**

순수한 자바코드를 단위테스트 하는 경우에 수정자 의존관계인 경우 누락될 가능성이 있다.

생성자 의존관계의 경우, 컴파일 오류가 발생하기때문에 누락 위험이 줄어든다.

Final 키워드 사용가능 - 컴파일 시점에 누락을 감지할 수 있음

**컴파일 오류는 가장빠르고 좋은 오류!**

순수한 자바언어의 특징을 잘 살리는 방법

필수값이 아닌 경우 수정자 주입방식을 옵션으로 부여하자.

